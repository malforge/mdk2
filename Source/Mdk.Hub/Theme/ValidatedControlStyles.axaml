<Styles xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="clr-namespace:Mdk.Hub.Framework.Controls"
        xmlns:converters="clr-namespace:Mdk.Hub.Framework.Converters"
        xmlns:i="https://github.com/projektanker/icons.avalonia">

    <!-- ValidatedControl - Wrapper that adds consistent validation display -->
    <Style Selector="controls|ValidatedControl">
        <Setter Property="Template">
            <ControlTemplate TargetType="controls:ValidatedControl" x:DataType="controls:ValidatedControl">
                <StackPanel>
                    <!-- Content -->
                    <ContentPresenter Content="{TemplateBinding Content}" />
                    
                    <!-- Validation message - always reserves space -->
                    <StackPanel Orientation="Horizontal" 
                                Spacing="4" 
                                Margin="0,4,0,0">
                        <i:Icon Value="fa-solid fa-triangle-exclamation" 
                                Foreground="{DynamicResource ForegroundDangerBrush}"
                                FontSize="12"
                                VerticalAlignment="Top"
                                Margin="0,2,0,0"
                                Opacity="{Binding $parent[controls:ValidatedControl].HasValidationMessage, Converter={x:Static converters:BoolToDoubleConverter.Instance}}" />
                        <TextBlock Text="{TemplateBinding ResolvedValidationMessage}"
                                   Foreground="{DynamicResource ForegroundDangerBrush}"
                                   Classes="caption"
                                   TextTrimming="CharacterEllipsis"
                                   MaxLines="1" />
                    </StackPanel>
                </StackPanel>
            </ControlTemplate>
        </Setter>
    </Style>

    <!-- Error styling for controls wrapped in ValidatedControl -->
    <Style Selector="TextBox.error">
        <Setter Property="BorderBrush" Value="{DynamicResource BorderDangerBrush}" />
    </Style>
    
    <Style Selector="TextBox.error:focus /template/ Border#PART_BorderElement">
        <Setter Property="BorderBrush" Value="{DynamicResource BorderDangerBrush}" />
    </Style>
    
    <Style Selector="TextBox.error:pointerover /template/ Border#PART_BorderElement">
        <Setter Property="BorderBrush" Value="{DynamicResource BorderDangerBrush}" />
    </Style>
    
    <Style Selector="ComboBox.error">
        <Setter Property="BorderBrush" Value="{DynamicResource BorderDangerBrush}" />
    </Style>
    
    <Style Selector="ComboBox.error:focus /template/ Border#Background">
        <Setter Property="BorderBrush" Value="{DynamicResource BorderDangerBrush}" />
    </Style>
    
    <Style Selector="ComboBox.error:pointerover /template/ Border#Background">
        <Setter Property="BorderBrush" Value="{DynamicResource BorderDangerBrush}" />
    </Style>

</Styles>
